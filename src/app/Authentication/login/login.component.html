<!-- Begin page -->
<div class="accountbg"></div>
<div class="wrapper2-page">

    <div class="card">
        <div class="card-body">

            <a href="index.html" >
                <img src="../assets/images/logo-2.png" class="rounded mx-auto d-block"  alt="logo">
               </a>

            <h4 class="text-muted text-center font-18"><b>Sign In</b></h4>
            <div class="p-3">
                    <div *ngIf="newloginErr" class="alert alert-danger alert-dismissible">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                            <h4><i class="icon fa fa-ban"></i> Error!</h4>
                           <span >{{newloginErr}}</span>
                           
                          </div>
        
                          <div *ngIf="newloginSuccess" class="alert alert-success alert-dismissible">
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                            <h4><i class="icon fa fa-check"></i> Success!</h4>
                           <span >{{newloginSuccess}}</span>
                           
                          </div>
            </div>
            <div class="p-3">
                    <form class="form-horizontal m-t-20" id="loginform"  name="loginform" class="default-form" #loginform="ngForm">
    
                        <div class="form-group row">
                            <div class="col-12">
                                <input id="cususername" name="cususername" [(ngModel)]="loginData.cususername" #cususername = "ngModel" class="form-control" type="text" required="" placeholder="Username">
                            </div>
                        </div>
    
                        <div class="form-group row">
                            <div class="col-12">
                                <input id="custpassword" name="custpassword" [(ngModel)]="loginData.custpassword" #custpassword = "ngModel" class="form-control" type="password" required="" placeholder="Password">
                            </div>
                        </div>
    
                        <div class="form-group row">
                            <div class="col-12">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="customCheck1">
                                    <label class="custom-control-label" for="customCheck1">Remember me</label>
                                </div>
                            </div>
                        </div>
    
                        <div class="form-group text-center row m-t-20">
                            <div class="col-12">
                                <button class="btn btn-info btn-block waves-effect waves-light" (click)="Clientlogin(loginData,scndlevelAuth)" type="submit">Log In</button>
                            </div>
                        </div>
    
                        <div class="form-group m-t-10 mb-0 row">
                            <div class="col-sm-7 m-t-20">
                                <a href="#" class="text-muted"><i class="mdi mdi-lock    "></i> Forgot your password?</a>
                            </div>
                            <div class="col-sm-5 m-t-20">
                                <a href="register" class="text-muted"><i class="mdi mdi-account-circle"></i> Create an account</a>
                            </div>
                        </div>
                        <ng-template #scndlevelAuth>
                                <div class="modal-header">
                                  <h4 class="modal-title pull-left">Second Level Authentication</h4>
                                 
                                </div>
                                <div class="modal-body">
                                    <div class="p-3"> 
                                        <div *ngIf="newloginErr" class="alert alert-danger alert-dismissible">
                                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                                            <h4><i class="icon fa fa-ban"></i> Error!</h4>
                                           <span >{{newloginErr}}</span>
                                           
                                          </div>
                        
                                          <div *ngIf="newloginSuccess" class="alert alert-success alert-dismissible">
                                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">×</button>
                                            <h4><i class="icon fa fa-check"></i> Success!</h4>
                                           <span >{{newloginSuccess}}</span>
                                           
                                          </div>
                                        <div class="form-group row">
                                                <div class="col-4" *ngIf="qrCodeUrl">
                                                        <h2><span class="badge badge-default">1</span></h2>
                                                        <p>Install <strong> Google Authenticator</strong>
                                                                to your device</p>
                                                <a href="http://itunes.apple.com/app/google-authenticator/id388497605?mt=8" target="_blank">
                                                <img src="../assets/images/AvailableontheAppStore.png" alt="Available on iphone App store" style="width:138px ;height:41px">
                                                </a><p></p>
                                                <a href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2"  target="_blank">
                                                    <img src="../assets/images/GooglePlayStoreblock.png" alt="Available on iphone App store" style="width:138px ;height:50px">
                                                </a><p></p>
                                              <p>  <a href="http://support.google.com/accounts/bin/answer.py?hl=en&amp;answer=1066447" class="link link_lightBlue" target="_blank">Google Authenticator<br> on other devices</a>
                                                </p>
                                            </div>
                                                <div class="col-4" *ngIf="qrCodeUrl">
                                                        <h2><span class="badge badge-default">2</span></h2>
                                                        <p>Scan the code with your device</p>
                                                        <div class="form-group row" *ngIf="qrCodeUrl">
                                                                <div class="col-12">
                                                                        <img src="{{qrCodeUrl}}" class="rounded mx-auto d-block"  alt="Auth Bar Code">
                                                                </div>
                                                            </div>  
                                                    </div>
                                                <div class="col-4">
                                                        <h2><span *ngIf="qrCodeUrl" class="badge badge-default">3</span></h2>
                                                        <p >Enter validation code from your device:</p>
                                                        <div class="form-group row">
                                                                <div class="col-12">
                                                        <input id="cust2fa" name="cust2fa" [(ngModel)]="loginData.cust2fa" #cust2fa = "ngModel" class="form-control" type="text" required="" placeholder="Authentication code">
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="form-group text-center row m-t-20">
                                                    <div class="col-12">
                                                        <button class="btn btn-info btn-block waves-effect waves-light" (click)="secndlevelAuth(loginData)" type="button">Verify</button>
                                                    </div>
                                                </div>
                                                </div>
                                </div>
                              </ng-template>
                    </form>
                </div>

        </div>
    </div>
</div>

